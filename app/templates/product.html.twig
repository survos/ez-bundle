{% extends "@EasyAdmin/layout.html.twig" %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        .product-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 0.5rem;
            overflow: hidden;
        }

        .product-image-wrapper {
            position: relative;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 0.5rem;
            overflow: hidden;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .placeholder-icon {
            font-size: 8rem;
            color: rgba(0, 0, 0, 0.1);
        }

        .stock-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            backdrop-filter: blur(10px);
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .product-detail-card {
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.05);
            border: none;
        }

        .info-item {
            padding: 1rem;
            border-radius: 0.5rem;
            background: var(--tblr-bg-surface);
            transition: all 0.3s ease;
        }

        .info-item:hover {
            background: var(--tblr-bg-surface-tertiary);
            transform: translateX(4px);
        }

        @media (max-width: 768px) {
            .product-image-wrapper {
                height: 300px;
            }
        }
    </style>
{% endblock %}

{% block body %}
<div class="page-wrapper">
    <div class="page-header d-print-none">
        <div class="container-xl">
            <div class="row g-2 align-items-center">
                <div class="col">
                    <div class="page-pretitle">
                        <a href="{{ path('admin_product_index') }}" class="text-muted">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M5 12l14 0"></path>
                                <path d="M5 12l6 6"></path>
                                <path d="M5 12l6 -6"></path>
                            </svg>
                            Product Listing
                        </a>
                    </div>
                    <h2 class="page-title">
                        {{ product.title|default('Product Details') }}
                    </h2>
                </div>
                {% if is_granted('ROLE_ADMIN') %}
                <div class="col-auto ms-auto">
                    <div class="btn-list">
                        <a href="{{ path('app_product_edit', {'sku': product.sku}) }}" class="btn btn-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"></path>
                                <path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"></path>
                                <path d="M16 5l3 3"></path>
                            </svg>
                            Edit Product
                        </a>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="page-body">
        <div class="container-xl">
            <div class="row row-deck row-cards">
                <!-- Product Image -->
                <div class="col-lg-5">
                    <div class="card product-detail-card">
                        <div class="card-body p-0">
                            <div class="product-image-wrapper">
                                {% if product.imageUrl %}
                                    <img src="{{ product.imageUrl }}" alt="{{ product.title }}" class="product-image">
                                {% else %}
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon placeholder-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                        <path d="M15 8h.01"></path>
                                        <path d="M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z"></path>
                                        <path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5"></path>
                                        <path d="M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3"></path>
                                    </svg>
                                {% endif %}

                                {% if product.stock is not null %}
                                    <div class="stock-badge
                                        {% if product.stock > 10 %}
                                            bg-success text-white
                                        {% elseif product.stock > 0 %}
                                            bg-warning text-dark
                                        {% else %}
                                            bg-danger text-white
                                        {% endif %}
                                    ">
                                        {% if product.stock > 10 %}
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M5 12l5 5l10 -10"></path>
                                            </svg>
                                            In Stock ({{ product.stock }})
                                        {% elseif product.stock > 0 %}
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M12 9v4"></path>
                                                <path d="M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z"></path>
                                                <path d="M12 16h.01"></path>
                                            </svg>
                                            Low Stock ({{ product.stock }})
                                        {% else %}
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M18 6l-12 12"></path>
                                                <path d="M6 6l12 12"></path>
                                            </svg>
                                            Out of Stock
                                        {% endif %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Product Details -->
                <div class="col-lg-7">
                    <div class="card product-detail-card mb-3">
                        <div class="card-header">
                            <h3 class="card-title">Product Information</h3>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <span class="badge bg-primary-lt">{{ product.category }}</span>
                            </div>

                            <h2 class="mb-3">{{ product.title }}</h2>

                            <div class="text-muted mb-4">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-barcode" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path d="M4 7v-1a2 2 0 0 1 2 -2h2"></path>
                                    <path d="M4 17v1a2 2 0 0 0 2 2h2"></path>
                                    <path d="M16 4h2a2 2 0 0 1 2 2v1"></path>
                                    <path d="M16 20h2a2 2 0 0 0 2 -2v-1"></path>
                                    <path d="M5 11h1v2h-1z"></path>
                                    <path d="M10 11l0 2"></path>
                                    <path d="M14 11h1v2h-1z"></path>
                                    <path d="M19 11l0 2"></path>
                                </svg>
                                SKU: <strong>{{ product.sku }}</strong>
                            </div>

                            {% if product.description %}
                                <div class="markdown">
                                    <h4>Description</h4>
                                    <p class="text-muted">{{ product.description }}</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Additional Details Card -->
                    <div class="card product-detail-card">
                        <div class="card-header">
                            <h3 class="card-title">Details</h3>
                        </div>
                        <div class="list-group list-group-flush">
                            <div class="list-group-item info-item">
                                <div class="row align-items-center">
                                    <div class="col-auto">
                                        <span class="avatar rounded">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M4 7l16 0"></path>
                                                <path d="M10 11l0 6"></path>
                                                <path d="M14 11l0 6"></path>
                                                <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>
                                                <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>
                                            </svg>
                                        </span>
                                    </div>
                                    <div class="col">
                                        <div class="text-muted">Category</div>
                                        <div class="fw-bold">{{ product.category }}</div>
                                    </div>
                                </div>
                            </div>

                            <div class="list-group-item info-item">
                                <div class="row align-items-center">
                                    <div class="col-auto">
                                        <span class="avatar rounded">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M7 10h3v-3l-3.5 -3.5a6 6 0 0 1 8 8l6 6a2 2 0 0 1 -3 3l-6 -6a6 6 0 0 1 -8 -8l3.5 3.5"></path>
                                            </svg>
                                        </span>
                                    </div>
                                    <div class="col">
                                        <div class="text-muted">SKU</div>
                                        <div class="fw-bold font-monospace">{{ product.sku }}</div>
                                    </div>
                                </div>
                            </div>

                            <div class="list-group-item info-item">
                                <div class="row align-items-center">
                                    <div class="col-auto">
                                        <span class="avatar rounded
                                            {% if product.stock > 10 %}
                                                bg-success-lt
                                            {% elseif product.stock > 0 %}
                                                bg-warning-lt
                                            {% else %}
                                                bg-danger-lt
                                            {% endif %}
                                        ">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M7 10h3v-3l-3.5 -3.5a6 6 0 0 1 8 8l6 6a2 2 0 0 1 -3 3l-6 -6a6 6 0 0 1 -8 -8l3.5 3.5"></path>
                                            </svg>
                                        </span>
                                    </div>
                                    <div class="col">
                                        <div class="text-muted">Stock Level</div>
                                        <div class="fw-bold">
                                            {% if product.stock is not null %}
                                                {{ product.stock }} units
                                            {% else %}
                                                <span class="text-muted">Not tracked</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
